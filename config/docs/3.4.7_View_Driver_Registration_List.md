# 3.4.7 View Driver Registration List

## Function trigger
The admin clicks on the "Driver Registration" tab or selects "View Driver Registration List" from the admin dashboard sidebar.

## Function description
Allows the admin to view a paginated and searchable list of all pending driver registration applications in the Bengo system. The list displays driver application information including applicant details, submission status, submitted documents, and supports filtering by status (Pending, Approved, Rejected) and searching by applicant name, email, or phone number.

## Screen layout
The screen consists of:
- Header section displaying total registration count and page title
- Statistics cards showing counts for Pending, Approved, and Rejected applications
- Filter section with status dropdown and search input field
- Application list displaying cards for each registration application
- Each application card shows:
  - Applicant avatar and name
  - Application status badge
  - User information (email, phone, address)
  - Admin notes (if any)
  - Action buttons (View Details, Approve/Reject for pending applications)
- Pagination controls at the bottom

## Function details

### Data
- Application ID
- User ID (linked to User collection)
- User information (name, email, phone, address, avatarUrl, role, isEmailVerified, createdAt)
- Application status (Pending, Approved, Rejected)
- Admin note (optional text field for admin comments)
- Submitted documents:
  - License front URL
  - License back URL
  - ID card front URL
  - ID card back URL
  - Portrait photo URL
  - Vehicle photos (array of URLs)
  - Vehicle documents (array of URLs)
- Submission date (submittedAt)
- Review date (reviewedAt, if reviewed)
- Created date (createdAt)
- Updated date (updatedAt)
- Pagination metadata (page, limit, total, totalPages)

### Validation
- The system verifies admin privileges before displaying driver registration data.
- Only authenticated Admin accounts can access this feature.
- Status filter must be one of: Pending, Approved, or Rejected (default: Pending).
- Page number must be a positive integer (default: 1).
- Limit must be between 1 and 100 (default: 20, max: 100).
- Search query is optional and can match user name, email, or phone number (case-insensitive).

### Business rule
- BR-10: Only admin users can access the driver registration management page.
- BR-12: Admin can view all driver registration applications for monitoring and verification.
- BR-13: Driver application data must be linked to a valid User record.

### Functionality

#### In Normal Cases:
- The system retrieves the driver registration list with pagination (default 20 applications per page, max 100).
- Applications are sorted by creation date in descending order (newest first).
- If status filter is provided, the results are filtered to show only applications with that status.
- If search query is provided, the system searches for matching users by name, email, or phone number, then displays their applications.
- The admin can navigate between pages and view summary metadata (current page, limit per page, total applications, total pages).
- Each application card displays key information including applicant name, status, contact details, and submission date.
- Admin can click "View Details" to see full application information including all submitted documents.
- For pending applications, admin can click "Approve" or "Reject" buttons to review the application.
- Statistics cards at the top show real-time counts for each status category.

#### In Abnormal Cases:
- If the database connection fails → message: "Unable to retrieve driver registration list. Please try again later."
- If no applications match the filters → message: "No driver registration applications match your search criteria."
- If invalid status filter is provided → system defaults to "Pending" status.
- If page number is invalid or out of range → system defaults to page 1.
- If limit exceeds maximum (100) → system caps it at 100.
- If user is not authenticated as Admin → system returns 403 Forbidden error with message: "Không có quyền truy cập" (Access denied).


